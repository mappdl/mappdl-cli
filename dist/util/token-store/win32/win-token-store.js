const _0x18511c=_0x134c;function _0x135e(){const _0xf55012=['from','createParsingStream','Getting\x20credential\x20failed,\x20exit\x20code\x20','ensurePrefix','util','complete','Saving\x20token\x20with\x20args\x20','1429082ciTBqF','createWinTokenStore','slice','push','defineProperty','Creds\x20process\x20started\x20for\x20list,\x20monitoring\x20output','parse','stderr','./win-credstore-parser','removePrefix','Token\x20store\x20failed,\x20','targetName','../../../../bin/windows/creds.exe','\x20to\x20TokenEntry','213304iVozaK','output\x20list\x20completed','__esModule','toString','WinTokenStore','stdout','inspect','6WMBZqU','credential','1533524WiNEyn','join','Token\x20successfully\x20stored','Observable','removePrefixFromCred','Completed\x20getting\x20token,\x20result\x20=\x20','exit','4431102nzRMny','pipe','prefix','Deleting\x20token\x20with\x20args\x20','child_process','1793360rSsgdd','remove','7SlcjaS','487951Uiezmh','set','path','through2','rxjs','spawn','stringify','33084ORCyTy','end','debug','create','MobileCenterCli:target=','error','data','Converting\x20credential\x20','obj','hex','Creating\x20WinTokenStore','mappdl-cli:util:token-store:win32:win-token-store','utf8','length','execFile'];_0x135e=function(){return _0xf55012;};return _0x135e();}(function(_0x3b9448,_0xcefd1f){const _0x5715e6=_0x134c,_0x106b34=_0x3b9448();while(!![]){try{const _0x4b7da0=-parseInt(_0x5715e6(0x228))/0x1+parseInt(_0x5715e6(0x202))/0x2+-parseInt(_0x5715e6(0x217))/0x3*(-parseInt(_0x5715e6(0x219))/0x4)+parseInt(_0x5715e6(0x225))/0x5+parseInt(_0x5715e6(0x220))/0x6*(-parseInt(_0x5715e6(0x227))/0x7)+parseInt(_0x5715e6(0x210))/0x8+parseInt(_0x5715e6(0x22f))/0x9;if(_0x4b7da0===_0xcefd1f)break;else _0x106b34['push'](_0x106b34['shift']());}catch(_0x16a29b){_0x106b34['push'](_0x106b34['shift']());}}}(_0x135e,0x9d306),(Object[_0x18511c(0x206)](exports,_0x18511c(0x212),{'value':!0x0}),exports[_0x18511c(0x203)]=exports['WinTokenStore']=void 0x0));let childProcess=require(_0x18511c(0x224)),rxjs_1=require(_0x18511c(0x22c)),split=require('split2'),through=require(_0x18511c(0x22b)),path=require(_0x18511c(0x22a)),parser=require(_0x18511c(0x20a)),debug=require(_0x18511c(0x231))(_0x18511c(0x1f7)),util_1=require(_0x18511c(0x1ff)),credExePath=path[_0x18511c(0x21a)](__dirname,_0x18511c(0x20e)),targetNamePrefix='MappDLCli:target=',oldTargetNamePrefix=_0x18511c(0x233);class Prefixer{constructor(_0x2c1e80){const _0x423892=_0x18511c;this[_0x423892(0x222)]=_0x2c1e80?oldTargetNamePrefix:targetNamePrefix;}['ensurePrefix'](_0x4822a1){const _0x1c40a6=_0x18511c;return _0x4822a1=_0x4822a1[_0x1c40a6(0x204)](this[_0x1c40a6(0x222)]['length'])!==this[_0x1c40a6(0x222)]?this['prefix']+_0x4822a1:_0x4822a1;}[_0x18511c(0x20b)](_0x696c1){const _0x4ebef6=_0x18511c;return _0x696c1['slice'](this['prefix'][_0x4ebef6(0x1f9)]);}[_0x18511c(0x21d)](_0x252ae2){const _0x40ff66=_0x18511c;return _0x252ae2[_0x40ff66(0x20d)]&&(_0x252ae2[_0x40ff66(0x20d)]=this[_0x40ff66(0x20b)](_0x252ae2[_0x40ff66(0x20d)])),_0x252ae2;}}function encodeTokenValueAsHex(_0x2c964a){const _0x444e23=_0x18511c;return _0x2c964a=JSON[_0x444e23(0x22e)](_0x2c964a),Buffer[_0x444e23(0x1fb)](_0x2c964a,_0x444e23(0x1f8))[_0x444e23(0x213)](_0x444e23(0x1f5));}function decodeTokenValueFromHex(_0x2ad77a){const _0x3ed626=_0x18511c;return JSON[_0x3ed626(0x208)](Buffer[_0x3ed626(0x1fb)](_0x2ad77a,'hex')[_0x3ed626(0x213)](_0x3ed626(0x1f8)));}function credToTokenEntry(_0x5b0e47){const _0xa4a461=_0x18511c;return debug(_0xa4a461(0x236)+util_1['inspect'](_0x5b0e47)+_0xa4a461(0x20f)),{'key':_0x5b0e47['targetName'],'accessToken':decodeTokenValueFromHex(_0x5b0e47[_0xa4a461(0x218)])};}function _0x134c(_0x5516bd,_0x4b89b3){const _0x135eec=_0x135e();return _0x134c=function(_0x134c34,_0x3af23a){_0x134c34=_0x134c34-0x1f4;let _0x43fc95=_0x135eec[_0x134c34];return _0x43fc95;},_0x134c(_0x5516bd,_0x4b89b3);}class WinTokenStore{['list'](){const _0x311f9e=_0x18511c;let _0x40a0ab=new Prefixer(!0x1);return rxjs_1[_0x311f9e(0x21c)][_0x311f9e(0x232)](_0x20c0cd=>{const _0x400480=_0x311f9e;var _0x145c28=childProcess[_0x400480(0x22d)](credExePath,['-s','-g','-t',targetNamePrefix+'*']),_0x145c28=(debug(_0x400480(0x207)),_0x145c28[_0x400480(0x215)][_0x400480(0x221)](parser[_0x400480(0x1fc)]())[_0x400480(0x221)](through[_0x400480(0x1f4)](function(_0x1afd14,_0x36de72,_0x34a2b9){const _0x1613fa=_0x400480;_0x34a2b9(null,_0x40a0ab[_0x1613fa(0x21d)](_0x1afd14));})));_0x145c28['on'](_0x400480(0x235),_0x477ff7=>{debug('Got\x20data\x20from\x20creds:\x20'+_0x477ff7),_0x20c0cd['next'](credToTokenEntry(_0x477ff7));}),_0x145c28['on'](_0x400480(0x230),()=>{const _0x3d097d=_0x400480;debug(_0x3d097d(0x211)),_0x20c0cd[_0x3d097d(0x200)]();}),_0x145c28['on'](_0x400480(0x234),_0x32e103=>_0x20c0cd[_0x400480(0x234)](_0x32e103));});}['get'](_0x3d68e1,_0x593f40=!0x1){const _0x4c3e6a=_0x18511c;let _0x3d8e5c=new Prefixer(_0x593f40);_0x593f40=['-s','-t',_0x3d8e5c[_0x4c3e6a(0x1fe)](_0x3d68e1)];let _0x6e9cb8=childProcess['spawn'](credExePath,_0x593f40),_0x803bcf=null,_0x40e679=[];return debug('Getting\x20key\x20with\x20args\x20'+util_1[_0x4c3e6a(0x216)](_0x593f40)),new Promise((_0xb25866,_0x1fa9d3)=>{const _0x391a30=_0x4c3e6a;_0x6e9cb8[_0x391a30(0x215)]['pipe'](parser[_0x391a30(0x1fc)]())[_0x391a30(0x221)](through['obj'](function(_0xf95e85,_0x83e174,_0x202b79){_0x202b79(null,_0x3d8e5c['removePrefixFromCred'](_0xf95e85));}))['on'](_0x391a30(0x235),_0x28a55b=>{(_0x803bcf=_0x28a55b)['targetName']=_0x3d8e5c['removePrefix'](_0x803bcf['targetName']);}),_0x6e9cb8[_0x391a30(0x209)][_0x391a30(0x221)](split())['on'](_0x391a30(0x235),_0x30bc35=>{const _0x277ff3=_0x391a30;_0x40e679[_0x277ff3(0x205)](_0x30bc35);}),_0x6e9cb8['on'](_0x391a30(0x21f),_0x490c6b=>0x0===_0x490c6b?(debug(_0x391a30(0x21e)+util_1[_0x391a30(0x216)](_0x803bcf)),_0xb25866(credToTokenEntry(_0x803bcf))):_0x1fa9d3(new Error(_0x391a30(0x1fd)+_0x490c6b+':\x20'+_0x40e679['join'](',\x20'))));});}[_0x18511c(0x229)](_0x4a30f9,_0x44ca4a){const _0x183f7d=_0x18511c;let _0x1c93bf=['-a','-t',new Prefixer(!0x1)[_0x183f7d(0x1fe)](_0x4a30f9),'-p',encodeTokenValueAsHex(_0x44ca4a)];return debug(_0x183f7d(0x201)+util_1[_0x183f7d(0x216)](_0x1c93bf)),new Promise((_0x2653c2,_0x11d496)=>{const _0x54bfed=_0x183f7d;childProcess[_0x54bfed(0x1fa)](credExePath,_0x1c93bf,function(_0x528f45){const _0x4163b8=_0x54bfed;return _0x528f45?(debug(_0x4163b8(0x20c)+util_1[_0x4163b8(0x216)](_0x528f45)),_0x11d496(_0x528f45)):(debug(_0x4163b8(0x21b)),_0x2653c2());});});}[_0x18511c(0x226)](_0x4d931f){const _0x44f4ad=_0x18511c;let _0x323805=['-d','-t',new Prefixer(!0x1)['ensurePrefix'](_0x4d931f)];return'*'===_0x4d931f[_0x44f4ad(0x204)](-0x1)&&_0x323805[_0x44f4ad(0x205)]('-g'),debug(_0x44f4ad(0x223)+util_1[_0x44f4ad(0x216)](_0x323805)),new Promise((_0x55f025,_0x5c01f0)=>{const _0x31f542=_0x44f4ad;childProcess[_0x31f542(0x1fa)](credExePath,_0x323805,function(_0x4806fb){if(_0x4806fb)return _0x5c01f0(_0x4806fb);_0x55f025();});});}}function createWinTokenStore(){const _0x2cb57f=_0x18511c;return debug(_0x2cb57f(0x1f6)),new WinTokenStore();}exports[_0x18511c(0x214)]=WinTokenStore,exports[_0x18511c(0x203)]=createWinTokenStore;